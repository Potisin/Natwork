{% extends "base.html" %}
{% block title %} Сообщения {% endblock %}
{% block header %} Сообщения {% endblock %}
{% block content %}

{% if not chat %}
    <div class="panel panel-body">
        {{ "Невозможно начать беседу. Не найден пользователь или вы не имеете доступа к данной беседе." }}
    </div>
{% else %}
    {% load user_filters %}
    {% if chat %}
        <div id="messages" class="panel">
            <div id="innerMessages">
                {% for message in chat.messages.all %}
                        {% include 'chats/message.html' with message_item=message %}
                {% endfor %}
            </div>
        </div>
    {% endif %}


                <form method="post" class="form-group row" >
                    {% csrf_token %}

                   {% for field in form %}
                            <div class="form-group row my-3">
                  <label for="{{ field.id_for_label }}">
                    {{ field.label }}

                      {% if field.field.required %}
                        <span class="required text-danger">*</span>
                      {% endif %}
                  </label>
                  {# К полю ввода добавляем атрибут class #}
                  {{ field|addclass:'form-control' }}
                    {% if field.help_text %}
                      <small
                         id="{{ field.id_for_label }}-help"
                         class="form-text text-muted"
                      >
                        {{ field.help_text|safe }}
                      </small>
                    {% endif %}
                </div>
                    {% endfor %}

            <button type="submit" class="btn btn-default btn-sm" onclick="return ETextEditor.validateForm('message-form')"><span class="ico ico-comment"></span>{{ "Отправить" }}</button>
        </form>
    </div>
{% endif %}



{% include 'posts/includes/paginator.html' %}

{% endblock %}
</body>
</html>