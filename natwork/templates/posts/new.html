{% extends "base.html" %}

{% block title %}
{% if request.resolver_match.view_name == 'posts:edit_post' %}
Редактирование
{% else %}
Новая запись
{% endif %}
{% endblock %}

{% block header %}  {% endblock %}
{% block content %}

<div class="row justify-content-center">
    <div class="col-md-8 p-5">
        <div class="card">
            <div class="card-header">Новый пост</div>
            <div class="card-body">

                {% load user_filters %}

                <form method="post" enctype="multipart/form-data" class="form-group row" >
                    {% csrf_token %}

                   {% for field in form %}
                            <div class="form-group row my-3">
                  <label for="{{ field.id_for_label }}">
                    {{ field.label }}

                      {% if field.field.required %}
                        <span class="required text-danger">*</span>
                      {% endif %}
                  </label>
                  {# К полю ввода добавляем атрибут class #}
                  {{ field|addclass:'form-control' }}
                    {% if field.help_text %}
                      <small
                         id="{{ field.id_for_label }}-help"
                         class="form-text text-muted"
                      >
                        {{ field.help_text|safe }}
                      </small>
                    {% endif %}
                </div>
                    {% endfor %}
<!---->

                        </div>

                    <div class="col-md-5 offset-md-5">
                            <button type="submit" class="btn btn-primary">
                                {% if request.resolver_match.view_name == 'posts:edit_post' %}
                                Сохранить
                                {% else %}
                                Отправить
                                {% endif %}
                            </button>
                    </div>
                </form>
            </div> <!-- card body -->
        </div> <!-- card -->
    </div> <!-- col -->
</div> <!-- row -->

{% endblock %}